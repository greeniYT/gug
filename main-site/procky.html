
<!DOCTYPE html>
<html lang="en">

<head>
  <script>
    // Auth protection - runs before page content loads
    if (sessionStorage.getItem('grogyAuth') !== 'true') {
        window.location.href = 'login.html';
    }
</script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>KidSearch - Greeni's Notebook: Powerful Learning!</title>
    <link rel="icon" type="image/png" href="../assets/favicon.png">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Comic Sans MS', 'Arial', sans-serif;
      background: #1a4d2e url('https://codehs.com/uploads/78adcf7cc651dcefd0a5a92bdb889791');
      color: #000;
      line-height: 1.4;
    }

    .content {
      position: relative;
      z-index2: 1;
      padding-bottom: 40px;
    }

    header {
      text-align: center;
      padding: 30px 20px;
      background: #2d7a4a;
      border: 5px solid #1a4d2e;
      margin: 10px;
      box-shadow: 5px 5px 0px #000;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .back-btn {
      background: #ff6b6b;
      border: 3px solid #0a3d2e;
      color: #fff;
      padding: 10px 20px;
      cursor: pointer;
      font-weight: bold;
      font-family: 'Arial Black', sans-serif;
      font-size: 14px;
      box-shadow: 3px 3px 0px #000;
      transition: all 0.2s;
      text-decoration: none;
    }

    .back-btn:hover {
      background: #ff5252;
      box-shadow: 5px 5px 0px #000;
      transform: scale(1.05);
    }

    .header-center {
      flex: 1;
      text-align: center;
    }

    .site-logo {
      max-width: 300px;
      height: auto;
      margin-bottom: 15px;
    }

    .apps-grid {
      max-width: 1200px;
      margin: 20px auto;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 20px;
      padding: 0 20px;
    }

    .app-card {
      background: #2d7a4a;
      border: 5px solid #1a4d2e;
      box-shadow: 5px 5px 0px #000;
      padding: 15px;
      display: flex;
      flex-direction: column;
      align-items: center;
      font-weight: bold;
      font-family: 'Arial Black', sans-serif;
      gap: 15px;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
    }

    .app-card:hover {
      transform: scale(1.05);
    }

    .app-icon {
      width: 60px;
      height: 60px;
      background: #00d4ff;
      border: 3px solid #0a3d2e;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      box-shadow: 3px 3px 0px #000;
    }

    .app-name {
      font-size: 16px;
      text-align: center;
    }

    /* Dropdown Modal */
    .dropdown-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: transparent;
      display: none;
      z-index2: 8000;
    }

    .dropdown-modal.active {
      display: block;
    }

    .dropdown-container {
      position: fixed;
      background: #2d7a4a;
      border: 5px solid #1a4d2e;
      box-shadow: 5px 5px 0px #000;
      min-width: 250px;
      display: flex;
      flex-direction: column;
      z-index2: 9000;
      max-height: 400px;
      overflow-y: auto;
      padding: 10px 0;
    }

    .dropdown-item {
      background: #00d4ff;
      border-bottom: 3px solid #1a4d2e;
      color: #0a3d2e;
      padding: 12px 20px;
      cursor: pointer;
      font-weight: bold;
      font-family: 'Arial Black', sans-serif;
      font-size: 13px;
      transition: all 0.2s;
    }

    .dropdown-item:last-child {
      border-bottom: none;
    }

    .dropdown-item:hover {
      background: #00a8cc;
      padding-left: 25px;
    }

    /* Iframe Overlay */
    .iframe-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: #000c;
      display: none;
      flex-direction: column;
      z-index2: 9999;
    }

    .iframe-controls {
      background: #2d7a4a;
      border-bottom: 5px solid #1a4d2e;
      padding: 10px;
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      flex-shrink: 0;
      z-index2: 10000;
      transition: opacity 0.3s, height 0.3s;
    }

    .iframe-controls.hidden {
      opacity: 0;
      height: 0;
      padding: 0;
      overflow: hidden;
    }

    .control-btn {
      background: #00d4ff;
      border: 3px solid #0a3d2e;
      color: #0a3d2e;
      padding: 8px 16px;
      cursor: pointer;
      font-weight: bold;
      font-family: 'Arial Black', sans-serif;
      box-shadow: 3px 3px 0px #000;
      transition: all 0.2s;
      user-select: none;
    }

    .control-btn:hover {
      background: #00a8cc;
      box-shadow: 5px 5px 0px #000;
      transform: scale(1.05);
    }

    .iframe-content {
      flex: 1;
      overflow: auto;
      background: #fff;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
    }

    .iframe-content iframe {
      width: 100%;
      height: 100%;
      border: none;
      display: block;
    }
  </style>
</head>

<body>

  <div class="content">
    <header>
      <a href="index.html" class="back-btn">‚Üê Back</a>
      <div class="header-center">
        <img src="https://pika-pika-14987361.codehs.me/new/logo.png" alt="VAULT" class="site-logo" />
      </div>
      <div class="tagline">"üõú" - might require hotspot connection to run</div>
      <div class="tagline">"üî•" - good procky</div>
      <div style="width: 80px;"></div>
    </header>

    <div class="apps-grid" id="appsGrid"></div>
  </div>

  <!-- Dropdown Modal -->
  <div class="dropdown-modal" id="dropdownModal">
    <div class="dropdown-container" id="dropdownContainer"></div>
  </div>

  <!-- Iframe Overlay -->
  <div class="iframe-overlay" id="iframeOverlay">
    <div class="iframe-controls" id="iframeControls">
      <button class="control-btn" id="closeIframeBtn">Close</button>
      <button class="control-btn" id="fullscreenIframeBtn">Fullscreen</button>
    </div>
    <div class="iframe-content" id="iframeContent">
      <!-- Iframe will be injected here -->
    </div>
  </div>

  <script>
    // Apps with their links
    const apps = [
      {
        name: 'endis',
        icon: 'https://cdn.jsdelivr.net/gh/greeniYT/gug@main/assets/endis.png',
        links: [
          { name: '1 üõú', url: 'https://endis.rest/' },
          { name: '2', url: 'https://cloverlightsbreaker.manutec.be' }
        ]
      },
      {
        name: 'Ghost',
        icon: 'https://cdn.jsdelivr.net/gh/greeniYT/gug@main/assets/ghost.webp',
        links: [
          { name: '1 üõú', url: 'https://ghostisbest-207325047024.us-central1.run.app/' },
        ]
      },
      {
        name: 'Fern üî•',
        icon: 'https://cdn.jsdelivr.net/gh/greeniYT/gug@main/assets/fern.png',
        links: [
          { name: '1', url: 'https://mrspechan.com' },
          { name: '2', url: 'https://creativefish.org' }
        ]
      },
       {
        name: 'DogeUb',
        icon: 'https://cdn.jsdelivr.net/gh/greeniYT/gug@main/assets/dogeub.png',
        links: [
          { name: '1', url: 'https://educationate.space.cdn.cloudflare.net/' },
        ]
      }
    ];

    const appsGrid = document.getElementById('appsGrid');
    const dropdownModal = document.getElementById('dropdownModal');
    const dropdownContainer = document.getElementById('dropdownContainer');
    const iframeOverlay = document.getElementById('iframeOverlay');
    const iframeContent = document.getElementById('iframeContent');
    const iframeControls = document.getElementById('iframeControls');
    const closeIframeBtn = document.getElementById('closeIframeBtn');
    const fullscreenIframeBtn = document.getElementById('fullscreenIframeBtn');

    let isFullscreen = false;

    // Render apps
    function renderApps() {
      appsGrid.innerHTML = '';

      apps.forEach((app) => {
        const card = document.createElement('div');
        card.className = 'app-card';

        const icon = document.createElement('img');
        icon.className = 'app-icon';
        icon.src = app.icon;
        icon.alt = app.name;
        icon.style.padding = '8px';
        icon.style.objectFit = 'contain';
        card.appendChild(icon);

        const name = document.createElement('div');
        name.className = 'app-name';
        name.textContent = app.name;
        card.appendChild(name);

        card.addEventListener('click', (e) => {
          showDropdown(app, e);
        });

        appsGrid.appendChild(card);
      });
    }

    // Show dropdown
    function showDropdown(app, event) {
      dropdownContainer.innerHTML = '';
      const rect = event.currentTarget.getBoundingClientRect();

      app.links.forEach(link => {
        const item = document.createElement('div');
        item.className = 'dropdown-item';
        item.textContent = link.name;
        item.addEventListener('click', () => {
          openLink(link.url);
          closeDropdown();
        });
        dropdownContainer.appendChild(item);
      });

      // Position dropdown
      dropdownContainer.style.top = (rect.bottom + 10) + 'px';
      dropdownContainer.style.left = rect.left + 'px';

      dropdownModal.classList.add('active');
    }

    // Close dropdown
    function closeDropdown() {
      dropdownModal.classList.remove('active');
    }

    // Open link in iframe
    function openLink(url) {
      const iframe = document.createElement('iframe');
      iframe.src = url;
      
      iframeContent.innerHTML = '';
      iframeContent.appendChild(iframe);

      showOverlay();
    }

    function showOverlay() {
      iframeOverlay.style.display = 'flex';
      isFullscreen = false;
      iframeControls.classList.remove('hidden');
      iframeOverlay.focus();
    }

    function hideOverlay() {
      iframeOverlay.style.display = 'none';
      iframeContent.innerHTML = '';
      if (isFullscreen) {
        exitFullscreen();
        isFullscreen = false;
      }
    }

    // Fullscreen toggle
    fullscreenIframeBtn.addEventListener('click', () => {
      if (!isFullscreen) {
        enterFullscreen(iframeOverlay);
        iframeControls.classList.add('hidden');
      } else {
        exitFullscreen();
        iframeControls.classList.remove('hidden');
      }
      isFullscreen = !isFullscreen;
    });

    // Close overlay
    closeIframeBtn.addEventListener('click', hideOverlay);

    // Fullscreen helper functions
    function enterFullscreen(element) {
      if (element.requestFullscreen) {
        element.requestFullscreen();
      } else if (element.webkitRequestFullscreen) {
        element.webkitRequestFullscreen();
      } else if (element.msRequestFullscreen) {
        element.msRequestFullscreen();
      }
    }

    function exitFullscreen() {
      if (document.exitFullscreen) {
        document.exitFullscreen();
      } else if (document.webkitExitFullscreen) {
        document.webkitExitFullscreen();
      } else if (document.msExitFullscreen) {
        document.msExitFullscreen();
      }
    }

    // Listen for fullscreen change
    document.addEventListener('fullscreenchange', () => {
      if (!document.fullscreenElement && isFullscreen) {
        isFullscreen = false;
        iframeControls.classList.remove('hidden');
      }
    });

    // ESC key closes overlay or dropdown
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        if (iframeOverlay.style.display === 'flex') {
          hideOverlay();
        } else if (dropdownModal.classList.contains('active')) {
          closeDropdown();
        }
      }
    });

    // Close dropdown when clicking outside
    dropdownModal.addEventListener('click', (e) => {
      if (e.target === dropdownModal) {
        closeDropdown();
      }
    });

    // Initialize
    renderApps();
  </script>
</body>

</html>